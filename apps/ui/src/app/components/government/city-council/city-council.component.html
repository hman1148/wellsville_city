<div class="page-container">
  <div class="page-header">
    <h1>
      <i class="pi pi-users" aria-hidden="true"></i>
      City Council
    </h1>
    <p class="page-description">
      Meet your city council members and contact them with questions or concerns
    </p>
  </div>

  <div class="council-grid">
    @for (member of cityCouncilStore.councilMembers(); track member.id) {
      <p-card styleClass="council-card" (click)="onContactMember(member)">
        <div class="card-content">
          <!-- Photo -->
          <div class="photo-container">
            <img
              [src]="member.photoPath"
              [alt]="member.name"
              class="council-photo"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
            />
            <div class="photo-placeholder" style="display: none;">
              <i class="pi pi-user" aria-hidden="true"></i>
            </div>
          </div>

          <!-- Member Info -->
          <div class="member-info">
            <h2 class="member-name">{{ member.name }}</h2>
            <p class="member-role">{{ member.role }}</p>

            <p-divider></p-divider>

            <!-- Contact Info -->
            <div class="contact-info">
              <div class="contact-item">
                <i class="pi pi-envelope" aria-hidden="true"></i>
                <a
                  [href]="'mailto:' + member.email"
                  class="contact-link"
                  (click)="$event.stopPropagation()">
                  {{ member.email }}
                </a>
              </div>
              <div class="contact-item">
                <i class="pi pi-phone" aria-hidden="true"></i>
                <a
                  [href]="'tel:' + member.phone"
                  class="contact-link"
                  (click)="$event.stopPropagation()">
                  {{ member.phone }}
                </a>
              </div>
              <div class="contact-item">
                <i class="pi pi-calendar" aria-hidden="true"></i>
                <span class="term-text">Term expires: {{ member.termExpires }}</span>
              </div>
            </div>

            <p-divider></p-divider>

            <!-- Assignments -->
            <div class="assignments-section">
              <h3 class="section-title">
                <i class="pi pi-briefcase" aria-hidden="true"></i>
                City Council Assignments
              </h3>
              <ul class="assignments-list">
                @for (assignment of member.assignments; track $index) {
                  <li>{{ assignment }}</li>
                }
              </ul>
            </div>

            <!-- Founders' Day Duties -->
            @if (member.foundersDayDuties.length > 0) {
              <div class="founders-day-section">
                <h3 class="section-title">
                  <i class="pi pi-flag" aria-hidden="true"></i>
                  Founders' Day Duties
                </h3>
                <ul class="assignments-list">
                  @for (duty of member.foundersDayDuties; track $index) {
                    <li>{{ duty }}</li>
                  }
                </ul>
              </div>
            }

            <!-- Contact Button -->
            <div class="action-section">
              <p-button
                label="Contact {{ member.name }}"
                icon="pi pi-send"
                styleClass="p-button-raised p-button-primary w-full"
                (onClick)="onContactMember(member); $event.stopPropagation()"
                [ariaLabel]="'Contact ' + member.name">
              </p-button>
            </div>
          </div>
        </div>
      </p-card>
    }
  </div>
</div>
